[{"data":1,"prerenderedAt":492},["ShallowReactive",2],{"post":3,"content-query-qoUtAvCQIn":286},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"imageFilename":11,"createdAt":12,"updatedAt":12,"readingTime":13,"body":18,"_type":280,"_id":281,"_source":282,"_file":283,"_stem":284,"_extension":285},"/posts/iptables-port-redirection","posts",false,"","IPTables port redirection","The simple process of forwarding ports between different machines using Linux's IPTables.",null,"2013.04.04T140000_iptables-port-redirection.png","2013-04-04T14:00:00",{"text":14,"minutes":15,"time":16,"words":17},"1 min read",0.14,8400,28,{"type":19,"children":20,"toc":278},"root",[21,29,252,257,262,267,272],{"type":22,"tag":23,"props":24,"children":25},"element","p",{},[26],{"type":27,"value":28},"text","Hi guys, I was trying to find a way to route connections from my Slackware Internet gateway to a VPS I have running elsewhere on my network, and it took me a little while to work it out, so here's my solution:",{"type":22,"tag":30,"props":31,"children":35},"pre",{"className":32,"code":33,"language":34,"meta":7,"style":7},"language-bash shiki shiki-themes github-dark","PROTOCOL=\"tcp\"\nDPORT=\"8080\"\nDESTADDR=\"10.0.0.7\"\nDESTPORT=\"80\"\niptables -t nat -A PREROUTING -p $PROTOCOL --dport $DPORT -j DNAT --to-destination $DESTADDR:$DESTPORT\niptables -t nat -A POSTROUTING -p tcp --dport $DESTPORT -j MASQUERADE\n","bash",[36],{"type":22,"tag":37,"props":38,"children":39},"code",{"__ignoreMap":7},[40,64,82,100,118,199],{"type":22,"tag":41,"props":42,"children":45},"span",{"class":43,"line":44},"line",1,[46,52,58],{"type":22,"tag":41,"props":47,"children":49},{"style":48},"--shiki-default:#E1E4E8",[50],{"type":27,"value":51},"PROTOCOL",{"type":22,"tag":41,"props":53,"children":55},{"style":54},"--shiki-default:#F97583",[56],{"type":27,"value":57},"=",{"type":22,"tag":41,"props":59,"children":61},{"style":60},"--shiki-default:#9ECBFF",[62],{"type":27,"value":63},"\"tcp\"\n",{"type":22,"tag":41,"props":65,"children":67},{"class":43,"line":66},2,[68,73,77],{"type":22,"tag":41,"props":69,"children":70},{"style":48},[71],{"type":27,"value":72},"DPORT",{"type":22,"tag":41,"props":74,"children":75},{"style":54},[76],{"type":27,"value":57},{"type":22,"tag":41,"props":78,"children":79},{"style":60},[80],{"type":27,"value":81},"\"8080\"\n",{"type":22,"tag":41,"props":83,"children":85},{"class":43,"line":84},3,[86,91,95],{"type":22,"tag":41,"props":87,"children":88},{"style":48},[89],{"type":27,"value":90},"DESTADDR",{"type":22,"tag":41,"props":92,"children":93},{"style":54},[94],{"type":27,"value":57},{"type":22,"tag":41,"props":96,"children":97},{"style":60},[98],{"type":27,"value":99},"\"10.0.0.7\"\n",{"type":22,"tag":41,"props":101,"children":103},{"class":43,"line":102},4,[104,109,113],{"type":22,"tag":41,"props":105,"children":106},{"style":48},[107],{"type":27,"value":108},"DESTPORT",{"type":22,"tag":41,"props":110,"children":111},{"style":54},[112],{"type":27,"value":57},{"type":22,"tag":41,"props":114,"children":115},{"style":60},[116],{"type":27,"value":117},"\"80\"\n",{"type":22,"tag":41,"props":119,"children":121},{"class":43,"line":120},5,[122,128,134,139,144,149,154,159,164,169,174,179,184,189,194],{"type":22,"tag":41,"props":123,"children":125},{"style":124},"--shiki-default:#B392F0",[126],{"type":27,"value":127},"iptables",{"type":22,"tag":41,"props":129,"children":131},{"style":130},"--shiki-default:#79B8FF",[132],{"type":27,"value":133}," -t",{"type":22,"tag":41,"props":135,"children":136},{"style":60},[137],{"type":27,"value":138}," nat",{"type":22,"tag":41,"props":140,"children":141},{"style":130},[142],{"type":27,"value":143}," -A",{"type":22,"tag":41,"props":145,"children":146},{"style":60},[147],{"type":27,"value":148}," PREROUTING",{"type":22,"tag":41,"props":150,"children":151},{"style":130},[152],{"type":27,"value":153}," -p",{"type":22,"tag":41,"props":155,"children":156},{"style":48},[157],{"type":27,"value":158}," $PROTOCOL ",{"type":22,"tag":41,"props":160,"children":161},{"style":130},[162],{"type":27,"value":163},"--dport",{"type":22,"tag":41,"props":165,"children":166},{"style":48},[167],{"type":27,"value":168}," $DPORT ",{"type":22,"tag":41,"props":170,"children":171},{"style":130},[172],{"type":27,"value":173},"-j",{"type":22,"tag":41,"props":175,"children":176},{"style":60},[177],{"type":27,"value":178}," DNAT",{"type":22,"tag":41,"props":180,"children":181},{"style":130},[182],{"type":27,"value":183}," --to-destination",{"type":22,"tag":41,"props":185,"children":186},{"style":48},[187],{"type":27,"value":188}," $DESTADDR",{"type":22,"tag":41,"props":190,"children":191},{"style":60},[192],{"type":27,"value":193},":",{"type":22,"tag":41,"props":195,"children":196},{"style":48},[197],{"type":27,"value":198},"$DESTPORT\n",{"type":22,"tag":41,"props":200,"children":202},{"class":43,"line":201},6,[203,207,211,215,219,224,228,233,238,243,247],{"type":22,"tag":41,"props":204,"children":205},{"style":124},[206],{"type":27,"value":127},{"type":22,"tag":41,"props":208,"children":209},{"style":130},[210],{"type":27,"value":133},{"type":22,"tag":41,"props":212,"children":213},{"style":60},[214],{"type":27,"value":138},{"type":22,"tag":41,"props":216,"children":217},{"style":130},[218],{"type":27,"value":143},{"type":22,"tag":41,"props":220,"children":221},{"style":60},[222],{"type":27,"value":223}," POSTROUTING",{"type":22,"tag":41,"props":225,"children":226},{"style":130},[227],{"type":27,"value":153},{"type":22,"tag":41,"props":229,"children":230},{"style":60},[231],{"type":27,"value":232}," tcp",{"type":22,"tag":41,"props":234,"children":235},{"style":130},[236],{"type":27,"value":237}," --dport",{"type":22,"tag":41,"props":239,"children":240},{"style":48},[241],{"type":27,"value":242}," $DESTPORT ",{"type":22,"tag":41,"props":244,"children":245},{"style":130},[246],{"type":27,"value":173},{"type":22,"tag":41,"props":248,"children":249},{"style":60},[250],{"type":27,"value":251}," MASQUERADE\n",{"type":22,"tag":23,"props":253,"children":254},{},[255],{"type":27,"value":256},"This basically just sets up a simple nat rule to forward anything coming in to the gateway on port 8080 to the machine with IP address 10.0.0.7 on port 80.",{"type":22,"tag":23,"props":258,"children":259},{},[260],{"type":27,"value":261},"Simples!",{"type":22,"tag":23,"props":263,"children":264},{},[265],{"type":27,"value":266},"Feel free to leave any questions, corrections or comments!",{"type":22,"tag":23,"props":268,"children":269},{},[270],{"type":27,"value":271},"n00b",{"type":22,"tag":273,"props":274,"children":275},"style",{},[276],{"type":27,"value":277},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":66,"depth":66,"links":279},[],"markdown","content:posts:2013-04-04-iptables-port-redirection.md","content","posts/2013-04-04-iptables-port-redirection.md","posts/2013-04-04-iptables-port-redirection","md",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"imageFilename":11,"createdAt":12,"updatedAt":12,"readingTime":287,"body":288,"_type":280,"_id":281,"_source":282,"_file":283,"_stem":284,"_extension":285},{"text":14,"minutes":15,"time":16,"words":17},{"type":19,"children":289,"toc":490},[290,294,470,474,478,482,486],{"type":22,"tag":23,"props":291,"children":292},{},[293],{"type":27,"value":28},{"type":22,"tag":30,"props":295,"children":296},{"className":32,"code":33,"language":34,"meta":7,"style":7},[297],{"type":22,"tag":37,"props":298,"children":299},{"__ignoreMap":7},[300,315,330,345,360,423],{"type":22,"tag":41,"props":301,"children":302},{"class":43,"line":44},[303,307,311],{"type":22,"tag":41,"props":304,"children":305},{"style":48},[306],{"type":27,"value":51},{"type":22,"tag":41,"props":308,"children":309},{"style":54},[310],{"type":27,"value":57},{"type":22,"tag":41,"props":312,"children":313},{"style":60},[314],{"type":27,"value":63},{"type":22,"tag":41,"props":316,"children":317},{"class":43,"line":66},[318,322,326],{"type":22,"tag":41,"props":319,"children":320},{"style":48},[321],{"type":27,"value":72},{"type":22,"tag":41,"props":323,"children":324},{"style":54},[325],{"type":27,"value":57},{"type":22,"tag":41,"props":327,"children":328},{"style":60},[329],{"type":27,"value":81},{"type":22,"tag":41,"props":331,"children":332},{"class":43,"line":84},[333,337,341],{"type":22,"tag":41,"props":334,"children":335},{"style":48},[336],{"type":27,"value":90},{"type":22,"tag":41,"props":338,"children":339},{"style":54},[340],{"type":27,"value":57},{"type":22,"tag":41,"props":342,"children":343},{"style":60},[344],{"type":27,"value":99},{"type":22,"tag":41,"props":346,"children":347},{"class":43,"line":102},[348,352,356],{"type":22,"tag":41,"props":349,"children":350},{"style":48},[351],{"type":27,"value":108},{"type":22,"tag":41,"props":353,"children":354},{"style":54},[355],{"type":27,"value":57},{"type":22,"tag":41,"props":357,"children":358},{"style":60},[359],{"type":27,"value":117},{"type":22,"tag":41,"props":361,"children":362},{"class":43,"line":120},[363,367,371,375,379,383,387,391,395,399,403,407,411,415,419],{"type":22,"tag":41,"props":364,"children":365},{"style":124},[366],{"type":27,"value":127},{"type":22,"tag":41,"props":368,"children":369},{"style":130},[370],{"type":27,"value":133},{"type":22,"tag":41,"props":372,"children":373},{"style":60},[374],{"type":27,"value":138},{"type":22,"tag":41,"props":376,"children":377},{"style":130},[378],{"type":27,"value":143},{"type":22,"tag":41,"props":380,"children":381},{"style":60},[382],{"type":27,"value":148},{"type":22,"tag":41,"props":384,"children":385},{"style":130},[386],{"type":27,"value":153},{"type":22,"tag":41,"props":388,"children":389},{"style":48},[390],{"type":27,"value":158},{"type":22,"tag":41,"props":392,"children":393},{"style":130},[394],{"type":27,"value":163},{"type":22,"tag":41,"props":396,"children":397},{"style":48},[398],{"type":27,"value":168},{"type":22,"tag":41,"props":400,"children":401},{"style":130},[402],{"type":27,"value":173},{"type":22,"tag":41,"props":404,"children":405},{"style":60},[406],{"type":27,"value":178},{"type":22,"tag":41,"props":408,"children":409},{"style":130},[410],{"type":27,"value":183},{"type":22,"tag":41,"props":412,"children":413},{"style":48},[414],{"type":27,"value":188},{"type":22,"tag":41,"props":416,"children":417},{"style":60},[418],{"type":27,"value":193},{"type":22,"tag":41,"props":420,"children":421},{"style":48},[422],{"type":27,"value":198},{"type":22,"tag":41,"props":424,"children":425},{"class":43,"line":201},[426,430,434,438,442,446,450,454,458,462,466],{"type":22,"tag":41,"props":427,"children":428},{"style":124},[429],{"type":27,"value":127},{"type":22,"tag":41,"props":431,"children":432},{"style":130},[433],{"type":27,"value":133},{"type":22,"tag":41,"props":435,"children":436},{"style":60},[437],{"type":27,"value":138},{"type":22,"tag":41,"props":439,"children":440},{"style":130},[441],{"type":27,"value":143},{"type":22,"tag":41,"props":443,"children":444},{"style":60},[445],{"type":27,"value":223},{"type":22,"tag":41,"props":447,"children":448},{"style":130},[449],{"type":27,"value":153},{"type":22,"tag":41,"props":451,"children":452},{"style":60},[453],{"type":27,"value":232},{"type":22,"tag":41,"props":455,"children":456},{"style":130},[457],{"type":27,"value":237},{"type":22,"tag":41,"props":459,"children":460},{"style":48},[461],{"type":27,"value":242},{"type":22,"tag":41,"props":463,"children":464},{"style":130},[465],{"type":27,"value":173},{"type":22,"tag":41,"props":467,"children":468},{"style":60},[469],{"type":27,"value":251},{"type":22,"tag":23,"props":471,"children":472},{},[473],{"type":27,"value":256},{"type":22,"tag":23,"props":475,"children":476},{},[477],{"type":27,"value":261},{"type":22,"tag":23,"props":479,"children":480},{},[481],{"type":27,"value":266},{"type":22,"tag":23,"props":483,"children":484},{},[485],{"type":27,"value":271},{"type":22,"tag":273,"props":487,"children":488},{},[489],{"type":27,"value":277},{"title":7,"searchDepth":66,"depth":66,"links":491},[],1735624507739]