[{"data":1,"prerenderedAt":290},["ShallowReactive",2],{"post":3,"content-query-KrCx7IC6KZ":177},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"image":11,"createdAt":12,"updatedAt":12,"readingTime":13,"body":18,"_type":171,"_id":172,"_source":173,"_file":174,"_stem":175,"_extension":176},"/posts/how-hot-plug-sata-drive-linux","posts",false,"","How To Hot Plug a SATA drive in Linux","How to hotplug SATA drives in Linux.",null,"2013.01.22T150000_how-hot-plug-sata-drive-linux.png","2013-01-22T15:00:00",{"text":14,"minutes":15,"time":16,"words":17},"1 min read",0.04,2400,8,{"type":19,"children":20,"toc":168},"root",[21,29,44,49,100,105,110,147,152,157,162],{"type":22,"tag":23,"props":24,"children":25},"element","p",{},[26],{"type":27,"value":28},"text","Hi guys,",{"type":22,"tag":23,"props":30,"children":31},{},[32,34,42],{"type":27,"value":33},"I knew SATA drives were hot-swappable, and a feature of a script I was writing required that the user be able to swap the drive that was plugged in at a certain point. It became obvious after checking the usual suspects (/var/log/messages, /var/log/dmesg) that the drive was not going to be detected by simply plugging it in. After a quick search online, I came up with ",{"type":22,"tag":35,"props":36,"children":39},"a",{"href":37,"target":38},"http://fredericiana.com/2010/06/15/hot-plugging-a-sata-drive-under-linux/","_blank",[40],{"type":27,"value":41},"fredericiana",{"type":27,"value":43},".",{"type":22,"tag":23,"props":45,"children":46},{},[47],{"type":27,"value":48},"The reason appears to be that the OS needs a poke to tell it to rescan the device. In Linux, this is as simple as echoing a value to a file. Here goes:",{"type":22,"tag":50,"props":51,"children":55},"pre",{"className":52,"code":53,"language":54,"meta":7,"style":7},"language-bash shiki shiki-themes github-dark","echo \"0 0 0\" &gt;/sys/class/scsi_host/host[n]/scan\n","bash",[56],{"type":22,"tag":57,"props":58,"children":59},"code",{"__ignoreMap":7},[60],{"type":22,"tag":61,"props":62,"children":65},"span",{"class":63,"line":64},"line",1,[66,72,78,84,90,95],{"type":22,"tag":61,"props":67,"children":69},{"style":68},"--shiki-default:#79B8FF",[70],{"type":27,"value":71},"echo",{"type":22,"tag":61,"props":73,"children":75},{"style":74},"--shiki-default:#9ECBFF",[76],{"type":27,"value":77}," \"0 0 0\"",{"type":22,"tag":61,"props":79,"children":81},{"style":80},"--shiki-default:#E1E4E8",[82],{"type":27,"value":83}," &",{"type":22,"tag":61,"props":85,"children":87},{"style":86},"--shiki-default:#B392F0",[88],{"type":27,"value":89},"gt",{"type":22,"tag":61,"props":91,"children":92},{"style":80},[93],{"type":27,"value":94},";",{"type":22,"tag":61,"props":96,"children":97},{"style":86},[98],{"type":27,"value":99},"/sys/class/scsi_host/host[n]/scan\n",{"type":22,"tag":23,"props":101,"children":102},{},[103],{"type":27,"value":104},"[n] will be one of a few numbers. Look in /sys/class/scsi_host to see what's available. There is one of these for each SATA port (this possibly includes PATA/IDE ports on newer kernels).",{"type":22,"tag":23,"props":106,"children":107},{},[108],{"type":27,"value":109},"To remove a drive, use the following:",{"type":22,"tag":50,"props":111,"children":113},{"className":52,"code":112,"language":54,"meta":7,"style":7},"echo \"x\" &gt; /sys/bus/scsi/devices/[n]:0:0:0/delete\n",[114],{"type":22,"tag":57,"props":115,"children":116},{"__ignoreMap":7},[117],{"type":22,"tag":61,"props":118,"children":119},{"class":63,"line":64},[120,124,129,133,137,142],{"type":22,"tag":61,"props":121,"children":122},{"style":68},[123],{"type":27,"value":71},{"type":22,"tag":61,"props":125,"children":126},{"style":74},[127],{"type":27,"value":128}," \"x\"",{"type":22,"tag":61,"props":130,"children":131},{"style":80},[132],{"type":27,"value":83},{"type":22,"tag":61,"props":134,"children":135},{"style":86},[136],{"type":27,"value":89},{"type":22,"tag":61,"props":138,"children":139},{"style":80},[140],{"type":27,"value":141},"; ",{"type":22,"tag":61,"props":143,"children":144},{"style":86},[145],{"type":27,"value":146},"/sys/bus/scsi/devices/[n]:0:0:0/delete\n",{"type":22,"tag":23,"props":148,"children":149},{},[150],{"type":27,"value":151},"I'll repeat the original author's warning, just so there's no confusion generated:",{"type":22,"tag":23,"props":153,"children":154},{},[155],{"type":27,"value":156},"\"Also, just to state the obvious, don't do that to a mounted drive, ever. Especially not the one that holds your system partition ;)\"",{"type":22,"tag":23,"props":158,"children":159},{},[160],{"type":27,"value":161},"n00b",{"type":22,"tag":163,"props":164,"children":165},"style",{},[166],{"type":27,"value":167},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":169,"depth":169,"links":170},2,[],"markdown","content:posts:2013-01-22-how-hot-plug-sata-drive-linux.md","content","posts/2013-01-22-how-hot-plug-sata-drive-linux.md","posts/2013-01-22-how-hot-plug-sata-drive-linux","md",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"image":11,"createdAt":12,"updatedAt":12,"readingTime":178,"body":179,"_type":171,"_id":172,"_source":173,"_file":174,"_stem":175,"_extension":176},{"text":14,"minutes":15,"time":16,"words":17},{"type":19,"children":180,"toc":288},[181,185,194,198,231,235,239,272,276,280,284],{"type":22,"tag":23,"props":182,"children":183},{},[184],{"type":27,"value":28},{"type":22,"tag":23,"props":186,"children":187},{},[188,189,193],{"type":27,"value":33},{"type":22,"tag":35,"props":190,"children":191},{"href":37,"target":38},[192],{"type":27,"value":41},{"type":27,"value":43},{"type":22,"tag":23,"props":195,"children":196},{},[197],{"type":27,"value":48},{"type":22,"tag":50,"props":199,"children":200},{"className":52,"code":53,"language":54,"meta":7,"style":7},[201],{"type":22,"tag":57,"props":202,"children":203},{"__ignoreMap":7},[204],{"type":22,"tag":61,"props":205,"children":206},{"class":63,"line":64},[207,211,215,219,223,227],{"type":22,"tag":61,"props":208,"children":209},{"style":68},[210],{"type":27,"value":71},{"type":22,"tag":61,"props":212,"children":213},{"style":74},[214],{"type":27,"value":77},{"type":22,"tag":61,"props":216,"children":217},{"style":80},[218],{"type":27,"value":83},{"type":22,"tag":61,"props":220,"children":221},{"style":86},[222],{"type":27,"value":89},{"type":22,"tag":61,"props":224,"children":225},{"style":80},[226],{"type":27,"value":94},{"type":22,"tag":61,"props":228,"children":229},{"style":86},[230],{"type":27,"value":99},{"type":22,"tag":23,"props":232,"children":233},{},[234],{"type":27,"value":104},{"type":22,"tag":23,"props":236,"children":237},{},[238],{"type":27,"value":109},{"type":22,"tag":50,"props":240,"children":241},{"className":52,"code":112,"language":54,"meta":7,"style":7},[242],{"type":22,"tag":57,"props":243,"children":244},{"__ignoreMap":7},[245],{"type":22,"tag":61,"props":246,"children":247},{"class":63,"line":64},[248,252,256,260,264,268],{"type":22,"tag":61,"props":249,"children":250},{"style":68},[251],{"type":27,"value":71},{"type":22,"tag":61,"props":253,"children":254},{"style":74},[255],{"type":27,"value":128},{"type":22,"tag":61,"props":257,"children":258},{"style":80},[259],{"type":27,"value":83},{"type":22,"tag":61,"props":261,"children":262},{"style":86},[263],{"type":27,"value":89},{"type":22,"tag":61,"props":265,"children":266},{"style":80},[267],{"type":27,"value":141},{"type":22,"tag":61,"props":269,"children":270},{"style":86},[271],{"type":27,"value":146},{"type":22,"tag":23,"props":273,"children":274},{},[275],{"type":27,"value":151},{"type":22,"tag":23,"props":277,"children":278},{},[279],{"type":27,"value":156},{"type":22,"tag":23,"props":281,"children":282},{},[283],{"type":27,"value":161},{"type":22,"tag":163,"props":285,"children":286},{},[287],{"type":27,"value":167},{"title":7,"searchDepth":169,"depth":169,"links":289},[],1735475818879]