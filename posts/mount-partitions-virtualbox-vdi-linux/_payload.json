[{"data":1,"prerenderedAt":645},["ShallowReactive",2],{"post":3,"content-query-kKcOAAfimh":370},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"image":11,"createdAt":12,"updatedAt":12,"readingTime":13,"body":18,"_type":364,"_id":365,"_source":366,"_file":367,"_stem":368,"_extension":369},"/posts/mount-partitions-virtualbox-vdi-linux","posts",false,"","Mount partitions from a VirtualBox VDI in Linux.","Mount your Virtualbox rig's partitions on the host machine",null,"2011.07.07T140000_mount-partitions-virtualbox-vdi-linux.jpg","2011-07-07T14:00:00",{"text":14,"minutes":15,"time":16,"words":17},"1 min read",0.145,8700,29,{"type":19,"children":20,"toc":360},"root",[21,29,34,42,57,96,101,126,131,167,172,222,227,262,267,291,296,334,339,344,349,354],{"type":22,"tag":23,"props":24,"children":25},"element","p",{},[26],{"type":27,"value":28},"text","Hi, people!",{"type":22,"tag":23,"props":30,"children":31},{},[32],{"type":27,"value":33},"The title's pretty self explanatory, so I'll just dive right in...",{"type":22,"tag":35,"props":36,"children":39},"h2",{"style":37,"id":38},"color: red","update-31-jul-12",[40],{"type":27,"value":41},"Update: 31-Jul-12",{"type":22,"tag":23,"props":43,"children":44},{},[45,47,55],{"type":27,"value":46},"qemu-nbd is somewhat broken in Ubuntu Precise at the moment. Here's a new method (note: You will need quite a large amount of free HDD space to do this, as we make 2 separate copies of the original VDI). I've also written a ",{"type":22,"tag":48,"props":49,"children":52},"a",{"href":50,"target":51},"https://gist.github.com/3218617","_blank",[53],{"type":27,"value":54},"script, which should do the whole process for you",{"type":27,"value":56}," (although you'll still need to install qemu-utils yourself).",{"type":22,"tag":58,"props":59,"children":63},"pre",{"className":60,"code":61,"language":62,"meta":7,"style":7},"language-bash shiki shiki-themes github-dark","sudo apt-get install qemu-utils\n","bash",[64],{"type":22,"tag":65,"props":66,"children":67},"code",{"__ignoreMap":7},[68],{"type":22,"tag":69,"props":70,"children":73},"span",{"class":71,"line":72},"line",1,[74,80,86,91],{"type":22,"tag":69,"props":75,"children":77},{"style":76},"--shiki-default:#B392F0",[78],{"type":27,"value":79},"sudo",{"type":22,"tag":69,"props":81,"children":83},{"style":82},"--shiki-default:#9ECBFF",[84],{"type":27,"value":85}," apt-get",{"type":22,"tag":69,"props":87,"children":88},{"style":82},[89],{"type":27,"value":90}," install",{"type":22,"tag":69,"props":92,"children":93},{"style":82},[94],{"type":27,"value":95}," qemu-utils\n",{"type":22,"tag":23,"props":97,"children":98},{},[99],{"type":27,"value":100},"You need qemu-utils for the command qemu-img. This command is for *buntu. Use your distribution's package manager to install the package.",{"type":22,"tag":58,"props":102,"children":103},{"className":60,"code":61,"language":62,"meta":7,"style":7},[104],{"type":22,"tag":65,"props":105,"children":106},{"__ignoreMap":7},[107],{"type":22,"tag":69,"props":108,"children":109},{"class":71,"line":72},[110,114,118,122],{"type":22,"tag":69,"props":111,"children":112},{"style":76},[113],{"type":27,"value":79},{"type":22,"tag":69,"props":115,"children":116},{"style":82},[117],{"type":27,"value":85},{"type":22,"tag":69,"props":119,"children":120},{"style":82},[121],{"type":27,"value":90},{"type":22,"tag":69,"props":123,"children":124},{"style":82},[125],{"type":27,"value":95},{"type":22,"tag":23,"props":127,"children":128},{},[129],{"type":27,"value":130},"This will show you a list of all your VM VDIs. Note down the UUID for the VDI you want to mount.",{"type":22,"tag":58,"props":132,"children":134},{"className":60,"code":133,"language":62,"meta":7,"style":7},"VBoxManage clonehd UUIDGOESHERE outputfilename.vmdk --format=VMDK\n",[135],{"type":22,"tag":65,"props":136,"children":137},{"__ignoreMap":7},[138],{"type":22,"tag":69,"props":139,"children":140},{"class":71,"line":72},[141,146,151,156,161],{"type":22,"tag":69,"props":142,"children":143},{"style":76},[144],{"type":27,"value":145},"VBoxManage",{"type":22,"tag":69,"props":147,"children":148},{"style":82},[149],{"type":27,"value":150}," clonehd",{"type":22,"tag":69,"props":152,"children":153},{"style":82},[154],{"type":27,"value":155}," UUIDGOESHERE",{"type":22,"tag":69,"props":157,"children":158},{"style":82},[159],{"type":27,"value":160}," outputfilename.vmdk",{"type":22,"tag":69,"props":162,"children":164},{"style":163},"--shiki-default:#79B8FF",[165],{"type":27,"value":166}," --format=VMDK\n",{"type":22,"tag":23,"props":168,"children":169},{},[170],{"type":27,"value":171},"This command converts the VDI to a VMDK using VirtualBox's CLI.",{"type":22,"tag":58,"props":173,"children":175},{"className":60,"code":174,"language":62,"meta":7,"style":7},"qemu-img convert -f vmdk inputfilename.vmdk -O raw outputfilename.raw\n",[176],{"type":22,"tag":65,"props":177,"children":178},{"__ignoreMap":7},[179],{"type":22,"tag":69,"props":180,"children":181},{"class":71,"line":72},[182,187,192,197,202,207,212,217],{"type":22,"tag":69,"props":183,"children":184},{"style":76},[185],{"type":27,"value":186},"qemu-img",{"type":22,"tag":69,"props":188,"children":189},{"style":82},[190],{"type":27,"value":191}," convert",{"type":22,"tag":69,"props":193,"children":194},{"style":163},[195],{"type":27,"value":196}," -f",{"type":22,"tag":69,"props":198,"children":199},{"style":82},[200],{"type":27,"value":201}," vmdk",{"type":22,"tag":69,"props":203,"children":204},{"style":82},[205],{"type":27,"value":206}," inputfilename.vmdk",{"type":22,"tag":69,"props":208,"children":209},{"style":163},[210],{"type":27,"value":211}," -O",{"type":22,"tag":69,"props":213,"children":214},{"style":82},[215],{"type":27,"value":216}," raw",{"type":22,"tag":69,"props":218,"children":219},{"style":82},[220],{"type":27,"value":221}," outputfilename.raw\n",{"type":22,"tag":23,"props":223,"children":224},{},[225],{"type":27,"value":226},"Here, we convert the HDD into a format readable by a generic Linux distribution.",{"type":22,"tag":58,"props":228,"children":230},{"className":60,"code":229,"language":62,"meta":7,"style":7},"parted rawfilename.raw unit b print\n",[231],{"type":22,"tag":65,"props":232,"children":233},{"__ignoreMap":7},[234],{"type":22,"tag":69,"props":235,"children":236},{"class":71,"line":72},[237,242,247,252,257],{"type":22,"tag":69,"props":238,"children":239},{"style":76},[240],{"type":27,"value":241},"parted",{"type":22,"tag":69,"props":243,"children":244},{"style":82},[245],{"type":27,"value":246}," rawfilename.raw",{"type":22,"tag":69,"props":248,"children":249},{"style":82},[250],{"type":27,"value":251}," unit",{"type":22,"tag":69,"props":253,"children":254},{"style":82},[255],{"type":27,"value":256}," b",{"type":22,"tag":69,"props":258,"children":259},{"style":82},[260],{"type":27,"value":261}," print\n",{"type":22,"tag":23,"props":263,"children":264},{},[265],{"type":27,"value":266},"Now, we list the partitions available in the raw disk image, to see their offsets. Note down the offset (remove the letter B from the end) of the partition you want to mount.",{"type":22,"tag":58,"props":268,"children":270},{"className":60,"code":269,"language":62,"meta":7,"style":7},"sudo losetup -f\n",[271],{"type":22,"tag":65,"props":272,"children":273},{"__ignoreMap":7},[274],{"type":22,"tag":69,"props":275,"children":276},{"class":71,"line":72},[277,281,286],{"type":22,"tag":69,"props":278,"children":279},{"style":76},[280],{"type":27,"value":79},{"type":22,"tag":69,"props":282,"children":283},{"style":82},[284],{"type":27,"value":285}," losetup",{"type":22,"tag":69,"props":287,"children":288},{"style":163},[289],{"type":27,"value":290}," -f\n",{"type":22,"tag":23,"props":292,"children":293},{},[294],{"type":27,"value":295},"This will tell you the next free loopback device. It will be in the format /dev/loop[n], where [n] is a number. On my machine, it's /dev/loop0, so I'll use that in the next example.",{"type":22,"tag":58,"props":297,"children":299},{"className":60,"code":298,"language":62,"meta":7,"style":7},"sudo losetup -o OFFSETGOESHERE /dev/loop0 rawfilename.raw\n",[300],{"type":22,"tag":65,"props":301,"children":302},{"__ignoreMap":7},[303],{"type":22,"tag":69,"props":304,"children":305},{"class":71,"line":72},[306,310,314,319,324,329],{"type":22,"tag":69,"props":307,"children":308},{"style":76},[309],{"type":27,"value":79},{"type":22,"tag":69,"props":311,"children":312},{"style":82},[313],{"type":27,"value":285},{"type":22,"tag":69,"props":315,"children":316},{"style":163},[317],{"type":27,"value":318}," -o",{"type":22,"tag":69,"props":320,"children":321},{"style":82},[322],{"type":27,"value":323}," OFFSETGOESHERE",{"type":22,"tag":69,"props":325,"children":326},{"style":82},[327],{"type":27,"value":328}," /dev/loop0",{"type":22,"tag":69,"props":330,"children":331},{"style":82},[332],{"type":27,"value":333}," rawfilename.raw\n",{"type":22,"tag":23,"props":335,"children":336},{},[337],{"type":27,"value":338},"Connect a loopback device to the file at the offset we noted down before.",{"type":22,"tag":23,"props":340,"children":341},{},[342],{"type":27,"value":343},"Now you can mount the loopback device (/dev/loop0 in my case) wherever you like.",{"type":22,"tag":23,"props":345,"children":346},{},[347],{"type":27,"value":348},"Any questions, just ask!",{"type":22,"tag":23,"props":350,"children":351},{},[352],{"type":27,"value":353},"n00b",{"type":22,"tag":355,"props":356,"children":357},"style",{},[358],{"type":27,"value":359},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":361,"depth":361,"links":362},2,[363],{"id":38,"depth":361,"text":41},"markdown","content:posts:2011-07-07-mount-partitions-virtualbox-vdi-linux.md","content","posts/2011-07-07-mount-partitions-virtualbox-vdi-linux.md","posts/2011-07-07-mount-partitions-virtualbox-vdi-linux","md",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"imagesource":10,"imagecredit":10,"image":11,"createdAt":12,"updatedAt":12,"readingTime":371,"body":372,"_type":364,"_id":365,"_source":366,"_file":367,"_stem":368,"_extension":369},{"text":14,"minutes":15,"time":16,"words":17},{"type":19,"children":373,"toc":642},[374,378,382,386,395,420,424,449,453,482,486,527,531,560,564,585,589,622,626,630,634,638],{"type":22,"tag":23,"props":375,"children":376},{},[377],{"type":27,"value":28},{"type":22,"tag":23,"props":379,"children":380},{},[381],{"type":27,"value":33},{"type":22,"tag":35,"props":383,"children":384},{"style":37,"id":38},[385],{"type":27,"value":41},{"type":22,"tag":23,"props":387,"children":388},{},[389,390,394],{"type":27,"value":46},{"type":22,"tag":48,"props":391,"children":392},{"href":50,"target":51},[393],{"type":27,"value":54},{"type":27,"value":56},{"type":22,"tag":58,"props":396,"children":397},{"className":60,"code":61,"language":62,"meta":7,"style":7},[398],{"type":22,"tag":65,"props":399,"children":400},{"__ignoreMap":7},[401],{"type":22,"tag":69,"props":402,"children":403},{"class":71,"line":72},[404,408,412,416],{"type":22,"tag":69,"props":405,"children":406},{"style":76},[407],{"type":27,"value":79},{"type":22,"tag":69,"props":409,"children":410},{"style":82},[411],{"type":27,"value":85},{"type":22,"tag":69,"props":413,"children":414},{"style":82},[415],{"type":27,"value":90},{"type":22,"tag":69,"props":417,"children":418},{"style":82},[419],{"type":27,"value":95},{"type":22,"tag":23,"props":421,"children":422},{},[423],{"type":27,"value":100},{"type":22,"tag":58,"props":425,"children":426},{"className":60,"code":61,"language":62,"meta":7,"style":7},[427],{"type":22,"tag":65,"props":428,"children":429},{"__ignoreMap":7},[430],{"type":22,"tag":69,"props":431,"children":432},{"class":71,"line":72},[433,437,441,445],{"type":22,"tag":69,"props":434,"children":435},{"style":76},[436],{"type":27,"value":79},{"type":22,"tag":69,"props":438,"children":439},{"style":82},[440],{"type":27,"value":85},{"type":22,"tag":69,"props":442,"children":443},{"style":82},[444],{"type":27,"value":90},{"type":22,"tag":69,"props":446,"children":447},{"style":82},[448],{"type":27,"value":95},{"type":22,"tag":23,"props":450,"children":451},{},[452],{"type":27,"value":130},{"type":22,"tag":58,"props":454,"children":455},{"className":60,"code":133,"language":62,"meta":7,"style":7},[456],{"type":22,"tag":65,"props":457,"children":458},{"__ignoreMap":7},[459],{"type":22,"tag":69,"props":460,"children":461},{"class":71,"line":72},[462,466,470,474,478],{"type":22,"tag":69,"props":463,"children":464},{"style":76},[465],{"type":27,"value":145},{"type":22,"tag":69,"props":467,"children":468},{"style":82},[469],{"type":27,"value":150},{"type":22,"tag":69,"props":471,"children":472},{"style":82},[473],{"type":27,"value":155},{"type":22,"tag":69,"props":475,"children":476},{"style":82},[477],{"type":27,"value":160},{"type":22,"tag":69,"props":479,"children":480},{"style":163},[481],{"type":27,"value":166},{"type":22,"tag":23,"props":483,"children":484},{},[485],{"type":27,"value":171},{"type":22,"tag":58,"props":487,"children":488},{"className":60,"code":174,"language":62,"meta":7,"style":7},[489],{"type":22,"tag":65,"props":490,"children":491},{"__ignoreMap":7},[492],{"type":22,"tag":69,"props":493,"children":494},{"class":71,"line":72},[495,499,503,507,511,515,519,523],{"type":22,"tag":69,"props":496,"children":497},{"style":76},[498],{"type":27,"value":186},{"type":22,"tag":69,"props":500,"children":501},{"style":82},[502],{"type":27,"value":191},{"type":22,"tag":69,"props":504,"children":505},{"style":163},[506],{"type":27,"value":196},{"type":22,"tag":69,"props":508,"children":509},{"style":82},[510],{"type":27,"value":201},{"type":22,"tag":69,"props":512,"children":513},{"style":82},[514],{"type":27,"value":206},{"type":22,"tag":69,"props":516,"children":517},{"style":163},[518],{"type":27,"value":211},{"type":22,"tag":69,"props":520,"children":521},{"style":82},[522],{"type":27,"value":216},{"type":22,"tag":69,"props":524,"children":525},{"style":82},[526],{"type":27,"value":221},{"type":22,"tag":23,"props":528,"children":529},{},[530],{"type":27,"value":226},{"type":22,"tag":58,"props":532,"children":533},{"className":60,"code":229,"language":62,"meta":7,"style":7},[534],{"type":22,"tag":65,"props":535,"children":536},{"__ignoreMap":7},[537],{"type":22,"tag":69,"props":538,"children":539},{"class":71,"line":72},[540,544,548,552,556],{"type":22,"tag":69,"props":541,"children":542},{"style":76},[543],{"type":27,"value":241},{"type":22,"tag":69,"props":545,"children":546},{"style":82},[547],{"type":27,"value":246},{"type":22,"tag":69,"props":549,"children":550},{"style":82},[551],{"type":27,"value":251},{"type":22,"tag":69,"props":553,"children":554},{"style":82},[555],{"type":27,"value":256},{"type":22,"tag":69,"props":557,"children":558},{"style":82},[559],{"type":27,"value":261},{"type":22,"tag":23,"props":561,"children":562},{},[563],{"type":27,"value":266},{"type":22,"tag":58,"props":565,"children":566},{"className":60,"code":269,"language":62,"meta":7,"style":7},[567],{"type":22,"tag":65,"props":568,"children":569},{"__ignoreMap":7},[570],{"type":22,"tag":69,"props":571,"children":572},{"class":71,"line":72},[573,577,581],{"type":22,"tag":69,"props":574,"children":575},{"style":76},[576],{"type":27,"value":79},{"type":22,"tag":69,"props":578,"children":579},{"style":82},[580],{"type":27,"value":285},{"type":22,"tag":69,"props":582,"children":583},{"style":163},[584],{"type":27,"value":290},{"type":22,"tag":23,"props":586,"children":587},{},[588],{"type":27,"value":295},{"type":22,"tag":58,"props":590,"children":591},{"className":60,"code":298,"language":62,"meta":7,"style":7},[592],{"type":22,"tag":65,"props":593,"children":594},{"__ignoreMap":7},[595],{"type":22,"tag":69,"props":596,"children":597},{"class":71,"line":72},[598,602,606,610,614,618],{"type":22,"tag":69,"props":599,"children":600},{"style":76},[601],{"type":27,"value":79},{"type":22,"tag":69,"props":603,"children":604},{"style":82},[605],{"type":27,"value":285},{"type":22,"tag":69,"props":607,"children":608},{"style":163},[609],{"type":27,"value":318},{"type":22,"tag":69,"props":611,"children":612},{"style":82},[613],{"type":27,"value":323},{"type":22,"tag":69,"props":615,"children":616},{"style":82},[617],{"type":27,"value":328},{"type":22,"tag":69,"props":619,"children":620},{"style":82},[621],{"type":27,"value":333},{"type":22,"tag":23,"props":623,"children":624},{},[625],{"type":27,"value":338},{"type":22,"tag":23,"props":627,"children":628},{},[629],{"type":27,"value":343},{"type":22,"tag":23,"props":631,"children":632},{},[633],{"type":27,"value":348},{"type":22,"tag":23,"props":635,"children":636},{},[637],{"type":27,"value":353},{"type":22,"tag":355,"props":639,"children":640},{},[641],{"type":27,"value":359},{"title":7,"searchDepth":361,"depth":361,"links":643},[644],{"id":38,"depth":361,"text":41},1734147139393]