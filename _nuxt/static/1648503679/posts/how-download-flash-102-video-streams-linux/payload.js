__NUXT_JSONP__("/posts/how-download-flash-102-video-streams-linux", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai){return {data:[{post:{slug:"how-download-flash-102-video-streams-linux",description:"How to download Flash 10.2 video streams in Linux. Various scripts and methods of simplification are included as updates, with full code available.",title:"How to download Flash 10.2 video streams in Linux.",imagesource:L,imagecredit:L,image:"2011.02.10T15:00:00_how-download-flash-102-video-streams-linux.jpg",createdAt:M,updatedAt:M,toc:[{depth:F,text:N},{depth:F,text:O},{depth:F,text:P}],body:{type:"root",children:[{type:b,tag:j,props:{},children:[{type:a,value:"Hey, people!"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Just thought I'd post this little nugget of information, as it's taken me a little while to work out how to do it. Before I start, I'll mention that downloading copyrighted material may well be extremely illegal where you live, so make sure you only use this technique to download videos which contain your work entirely. This can be useful if you have, for example, lost your user details for a video upload site of some variety, and there is no facility to retrieve your videos without it."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Anyway, enough with the disclaimer, on with the hack..."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As you may know, Flash Player used to store the temporary stream files in \u002Ftmp. They switched from this at the end of last year to storing them in the specific browser's cache folder for reasons unbeknownst to the masses. This still made it pretty easy to locate any file you may have wished to download. After a recent update, I found that I was unable to locate the temporary caching folder anywhere."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"My first step was to load the video in a browser, and check the output of the following command:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" -i flash\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This came out with a predictable, and very useful single line:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:a,value:"plugin-co "},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"25646"}]},{type:a,value:" n00b 17u REG "},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"8,2"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"31286337"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"787220"}]},{type:a,value:" \u002Ftmp\u002FFlashXXepl6qa "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:G}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This showed me that there was a file descriptor open to a \"deleted\" file, \u002Ftmp\u002FFlashXXepl6qa. "},{type:b,tag:"del",props:{dateTime:"2011-04-24T15:11:10+00:00"},children:[{type:a,value:"I'm no programmer, so I have no idea how this works, but it seems that it's adding chunks of data to this file descriptor (I imagine stored in RAM), while the file itself is technically nonexistent."}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:N}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Thanks to reader Raven Morris, I have some more information about what exactly is happening. The reason is that Linux does not have file locking, like Windows. Windows programs, when they open a file, will lock it, so no other programs can access it. In Linux, when a file is deleted, the operating system will keep track of it until there are no programs which have it open. Once the last program closes the last file descriptor to the file in question, the file becomes unrecoverable without relevant forensic tools, but until then, there is a record of it within the \u002Fproc\u002F*\u002Ffd directory tree."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Anyway, the second field of the output tells us which process currently has the file descriptor open, and the fourth tells us which number the file descriptor has taken. This is all we need to access the file itself."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you navigate to your \u002Fproc folder, you will see a bunch of folders all named numerically, including a folder which matches the number in the second field. Now navigate to this folder, then its subfolder \"fd\". In this folder, you will see a whole selection of numbers. These relate to the file descriptors themselves. Run \"ls -l\" in this folder, and you will see that each of these numbers is linked to either pipes, sockets or files. Within this, the number from the fourth field will be symbolic linked to the \u002Ftmp\u002FFlash* file we found before. To test that this is the right file, you can run it through mplayer or vlc (\"mplayer filedescriptornumber\"\u002F\"vlc filedescriptornumber\"). If you're having trouble finding the filename, try \"ls -l | grep Flash\", as pointed out by reader Nobi."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Once the video is fully streamed, you can use a simple \"cp\" to copy the file from the file descriptor to a real location on your hard disk. (\"cp filedescriptornumber ~\u002FVideos\u002Ffilename.flv\")."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Another way to locate these files is to use the following command:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"stat"}]},{type:a,value:" -c %N \u002Fproc\u002F*\u002Ffd\u002F* "},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"2"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:"1"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" -F"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"["}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:a,value:"'"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"]"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"'\u002FFlash\u002F{print$2}'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"I encourage you to play with the various sections of it to see how it works. If you're having trouble getting it to work, make sure you have the apostrophes, backticks and spaces in the correct location."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Reader Robert submitted the following BASH alias, to automate the whole process. Here's the script to insert into your bashrc:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,"function-name",k]},children:[{type:a,value:"cpflashvideo"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,S,T]},children:[{type:a,value:U}]},{type:a,value:" \u002Fproc\u002F"},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" ‘\u002FFlash\u002F"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:"\u002Fplugin-co\u002F’ "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" \u002F\u002F’"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"printf “%s”, $2"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:J}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]}]},{type:a,value:"\u002Ffd\u002F "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"ls"}]},{type:a,value:" -al "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" ‘"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:G}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"’ "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" ‘\u002F\u002F"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"printf “%s”, $8"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:J}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$*"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,S,T]},children:[{type:a,value:U}]},{type:a,value:" – "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:" \u002Fdev\u002Fnull"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:J}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"A couple of my friends were pondering the question of this, and came up with the following for those of you who have a few to many tabs open at one time... I've included a couple of versions, to show how this could be done using entirely awk, or a mixture of awk and sed."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This first one uses regexp matching in awk to ensure that the letter is stripped from the end of the fourth field:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:W}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,h]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:B}]},{type:a,value:" -n "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"\"Flash.*deleted\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"'{printf \"\u002Fproc\u002F\" $2 \"\u002Ffd\u002F\"; sub(\u002F[a-z]+\u002F,\"\",$4); print $4}'"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:p}]}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:_}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aa}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:E}]},{type:a,value:"mktemp -u --suffix .flv "},{type:b,tag:c,props:{className:[d,ab,ac]},children:[{type:a,value:ad}]},{type:a,value:"\u002FVideos\u002FVideo-XXX"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:p}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ae}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The next uses sed to strip off the last character of the fourth field:"}]},{type:a,value:f},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:W}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,h]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:B}]},{type:a,value:" -n"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" .tmp.Flash "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"'{print \"\u002Fproc\u002F\" $2 \"\u002Ffd\u002F\" $4}'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:m}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"sed"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"'s\u002F.$\u002F\u002F'"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:p}]}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:l}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:_}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:" -v "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aa}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:E}]},{type:a,value:"mktemp -u --suffix"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:af}]},{type:a,value:".flv --tmpdir"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,ab,ac]},children:[{type:a,value:ad}]},{type:a,value:"\u002FVideos\u002F"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:p}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ae}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:H,props:{},children:[{type:a,value:P}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Another reader (Dann) has written a Python script to achieve this. "},{type:b,tag:ag,props:{href:"https:\u002F\u002Fgist.github.com\u002F2580186",target:ah},children:[{type:a,value:"Here's a link to it on Gist"}]},{type:a,value:ai}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"I hope this post is as interesting for others as I found it myself, and as always, direct any questions to me in the comments!"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you are a Spanish speaker, and have had trouble understanding this, Taringa.net user racsoprieto has translated the basics of the article "},{type:b,tag:ag,props:{href:"http:\u002F\u002Fwww.taringa.net\u002Fposts\u002Flinux\u002F9247590\u002Fvideos-no-estan-en-tmp-_tmp-ubuntu-bajar-videos-flash-flv.html",title:"videos no estan en tmp \u002Ftmp ubuntu bajar videos flash flv",target:ah},children:[{type:a,value:"here"}]},{type:a,value:ai}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"n00b"}]}]},dir:"\u002Fposts",path:"\u002Fposts\u002Fhow-download-flash-102-video-streams-linux",extension:".md",readingStats:{text:"5 min read",minutes:4.665,time:279900,words:933}}}],fetch:{},mutations:void 0}}("text","element","span","token"," ","\n","punctuation","variable","operator","p","function",";","|","&","keyword",")","amp","div","nuxt-content-highlight","pre","language-bash","line-numbers","code","number","awk","`","string","lsof","grep","\\","$(",2,"(","h2","{","}","cp",null,"2011-02-10T15:00:00.000Z","UPDATE (24\u002F04\u002F11):","UPDATE (13\u002F07\u002F11):","UPDATE (18\u002F09\u002F11):","deleted","gt","builtin","class-name","cd","’","for","for-or-select","FILE","in","do","\n    ","$FILE","environment","constant","$HOME","done","=","a","_blank",".")));