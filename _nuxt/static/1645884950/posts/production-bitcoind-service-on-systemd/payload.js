__NUXT_JSONP__("/posts/production-bitcoind-service-on-systemd", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an){return {data:[{post:{slug:"production-bitcoind-service-on-systemd",description:"How to get bitcoind running securely behind systemd on Linux",title:"Production Ready Bitcoin Under systemd",imagesource:P,imagecredit:P,image:"2015.03.22T07:00:00_production-bitcoind-service-on-systemd.png",createdAt:Q,updatedAt:Q,toc:[{depth:x,text:R},{depth:G,text:S},{depth:G,text:T},{depth:G,text:U},{depth:G,text:V},{depth:x,text:W},{depth:x,text:X},{depth:x,text:Y},{depth:x,text:Z},{depth:x,text:_}],body:{type:"root",children:[{type:b,tag:k,props:{},children:[{type:a,value:"Hi folks,"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Finally, a new post! Today, we'll be investigating running bitcoind as a system-level service under systemd, the "},{type:b,tag:u,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSystemd#History_and_controversy",target:v},children:[{type:a,value:"controversial"}]},{type:a,value:" service manager that many Linux distributions are starting to implement as the default - Ubuntu Vivid Vervet, Debian Jessie, Oracle Linux and RHEL have just added systemd as their default process manager between mid 2014 and now. Fedora, Arch Linux, Mageia, and openSUSE however have all been enabled by default for some years."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Starting cryptocurrency daemons under process managers has long been a relatively easy process, as they behave much like traditional Linux system daemons, so we'll look into how to set bitcoind up in a production ready environment. Systemd will be configured to run the daemon as a locked down system user, with a custom and protected data directory, and automatically restart the daemon if it happens to exit for any reason."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"We will also set up the permissions so you can easily give your administrators control over the daemon via CLI. I'll be basing this guide on Bitcoin Core 0.10.0, although this same guide should work for core-0.9.x, and be easily modifiable for core-0.8.x."}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:R}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"To start out, you need to create the following files, and fill them out with the content I provide..."}]},{type:a,value:e},{type:b,tag:H,props:{},children:[{type:a,value:S}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:"Unit"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"Description"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"Bitcoin daemon "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"After"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"network.target\n\n"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:"Service"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"Type"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"simple\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"Restart"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"always\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"User"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"bitcoin\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"ExecStart"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fusr\u002Flocal\u002Fbin\u002Fbitcoind -datadir"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fvar\u002Flib\u002Fbitcoin -conf"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fetc\u002Fbitcoin.conf\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"ExecStop"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fusr\u002Flocal\u002Fbin\u002Fbitcoin-cli -datadir"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fvar\u002Flib\u002Fbitcoin stop\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"PIDFile"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fvar\u002Frun\u002Fbitcoin\u002Fbitcoin.pid\n\n"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:"Install"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"WantedBy"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"multi-user.target\n"}]}]}]},{type:a,value:e},{type:b,tag:H,props:{},children:[{type:a,value:T}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"This file ensures bitcoind's log files don't overfill the partition on which they're stored."}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:a,value:"\u002Fvar\u002Flib\u002Fbitcoin\u002Fdebug.log "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:C}]},{type:a,value:"\n        create "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:N}]},{type:a,value:" bitcoin bitcoin\n        daily\n        rotate "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"14"}]},{type:a,value:"\n        compress\n        sharedscripts\n        postrotate\n            "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"killall"}]},{type:a,value:" -HUP bitcoind\n        endscript\n"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:H,props:{},children:[{type:a,value:U}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Modify whichever of these two files already exists. This wraps the bitcoin CLI binary with its runtime configuration, so instead of running the whole command, we can just type bitcoin instead. Do "},{type:b,tag:aa,props:{},children:[{type:a,value:"NOT"}]},{type:a,value:" replace the whole file with this content, "},{type:b,tag:aa,props:{},children:[{type:a,value:"APPEND"}]},{type:a,value:" it to the end."}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"alias"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"bitcoin"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:"\"\u002Fusr\u002Flocal\u002Fbin\u002Fbitcoin-cli -datadir=\u002Fvar\u002Flib\u002Fbitcoin -conf=\u002Fetc\u002Fbitcoin.conf\""}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:H,props:{},children:[{type:a,value:V}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"rpcuser"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"bitcoinrpc\n"},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"rpcpassword"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"Sup3RsecR3tpa45sW0rdg0E5hEr3+"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ac}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"server"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"1"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"pid"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:a,value:"\u002Fvar\u002Frun\u002Fbitcoin\u002Fbitcoin.pid\n"}]}]}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:W}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Ok, now we're ready to install the daemon and its utilities into \u002Fusr\u002Flocal\u002Fbin, as we're going to use the pre-compiled daemon from the "},{type:b,tag:u,props:{href:"https:\u002F\u002Fbitcoin.org",target:v},children:[{type:a,value:"Bitcoin website"}]},{type:a,value:". This will save us having to worry about dependencies the binaries are "},{type:b,tag:u,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FStatic_build",target:v},children:[{type:a,value:"statically compiled"}]},{type:a,value:". This does, however, come at the expense of having to manage the daemon's versions ourselves and upgrade them manually as required. Navigate to the folder into which you would like to download the software, and enter the following, but change VERSION or ARCH depending on your server's distribution and the latest available client version:"}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ad}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"VERSION"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:"\"0.10.0\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ad}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m,j]},children:[{type:a,value:"ARCH"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:"\"64\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"wget"}]},{type:a,value:" https:\u002F\u002Fbitcoin.org\u002Fbin\u002Fbitcoin-core-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:"\u002Fbitcoin-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:af}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ah}]},{type:a,value:" -xf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ah}]},{type:a,value:" -xf bitcoin-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:af}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"cp"}]},{type:a,value:" bitcoin-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:"\u002Fbin\u002Fbitcoin* \u002Fusr\u002Flocal\u002Fbin\n"}]}]}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:X}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"We need to create a standard set of folders, which follow the same pattern as most other Linux daemons. Bear in mind that while this guide is designed pretty generically and should work for any standard Linux distribution that follows the Linux "},{type:b,tag:u,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FFilesystem_Hierarchy_Standard",target:v},children:[{type:a,value:"Filesystem Hierarchy Standard"}]},{type:a,value:" closely, if your favourite distribution deviates from it, then you may need to modify the guide - so make sure you know your distribution inside out before going much further! Run the following command:"}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"mkdir"}]},{type:a,value:" \u002Fvar\u002F"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:C}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:aj}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"We now create a system user to handle the service, and a group if the system doesn't create one automatically:"}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"useradd"}]},{type:a,value:" -r -s \u002Fbin\u002Ffalse -d \u002Fvar\u002Flib\u002Fbitcoin bitcoin\n"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$("}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"grep"}]},{type:a,value:" bitcoin \u002Fetc\u002Fgroup"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ak}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"("}]},{type:a,value:"sudo "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"groupadd"}]},{type:a,value:" bitcoin "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"usermod"}]},{type:a,value:" -aG bitcoin bitcoin"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"echo"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,I]},children:[{type:a,value:"\"umask 037\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:ac}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"tee"}]},{type:a,value:" \u002Fvar\u002Flib\u002Fbitcoin\u002F.profile\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:" -R bitcoin:bitcoin \u002Fvar\u002F"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:C}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:" \u002Fvar\u002Flib\u002Fbitcoin -type f -exec "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:N}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:" \u002Fvar\u002Flib\u002Fbitcoin -type d -exec "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"750"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:z}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"This series of commands sets up sane defaults for the system user's environment. It ensures there is a "},{type:b,tag:u,props:{href:"http:\u002F\u002Funix.stackexchange.com\u002Fquestions\u002F80277\u002Fwhats-the-difference-between-a-normal-user-and-a-system-user",target:v},children:[{type:a,value:"system user"}]},{type:a,value:" and group with the name \"bitcoin\", and that the user only ever creates files that have permissions of 640 (user read\u002Fwrite, group read, other refuse access)."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"This means that only the users \"bitcoin\" and \"root\" can create files in its home directory, and that files created by the bitcoin user can also be read by any other user in the bitcoin group. This will allow other administrators than those with root access to be able to read the daemon's logs and debug it as required, but not to make changes to any of the daemon's files."}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Now we are going to set up a "},{type:b,tag:u,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSymbolic_link",target:v},children:[{type:a,value:"symbolic link"}]},{type:a,value:" to standardise the location of bitcoind's log files. Enter the following commands, to ensure that bitcoind's log file is viewable from \u002Fvar\u002Flog\u002Fbitcoin.log. It would be even better if we could output stderr to \u002Fvar\u002Flog\u002Fbitcoin.err, but I couldn't work out how to make systemd do this without throwing bitcoind's logging to std{out,err} and redirecting again it from syslog, which is out of the scope of this guide."}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:" -s \u002Fvar\u002Flib\u002Fbitcoin\u002Fdebug.log \u002Fvar\u002Flog\u002Fbitcoin\u002Fdebug.log\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:" -s \u002Fvar\u002Flib\u002Fbitcoin\u002Fdb.log \u002Fvar\u002Flog\u002Fbitcoin\u002Fdb.log\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:" root:bitcoin \u002Fvar\u002Flog\u002Fbitcoin\u002F*\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"660"}]},{type:a,value:" \u002Fvar\u002Flog\u002Fbitcoin\u002F*\n"}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"This file does not exist yet, so your symlink will currently be dangling. Don't worry about it for now. When we start the bitcoin service, it will cease to be broken."}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:Z}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"The file we set up before at \u002Fetc\u002Fbitcoin.conf needs to be further configured to be ready for production. First of all, change the rpcpassword field to be something "},{type:b,tag:u,props:{href:"https:\u002F\u002Fstrongpasswordgenerator.com\u002F",target:v},children:[{type:a,value:"unique, long and secure"}]},{type:a,value:". Make sure it's a decent length. I suggest 32 characters or more."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Now we can set up the permissions:"}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:" root:bitcoin \u002Fetc\u002Fbitcoin.conf\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:N}]},{type:a,value:" \u002Fetc\u002Fbitcoin.conf\n"}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"This will make sure that the configuration file cannot be edited by anybody except root (not even the bitcoin user itself), and can only be read by those who are members of the bitcoin group."}]},{type:a,value:e},{type:b,tag:y,props:{},children:[{type:a,value:_}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"We've reached the final stages. Here we'll enable the service to start on boot and test it out!"}]},{type:a,value:e},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:" systemctl daemon-reload\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:" systemctl "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"enable"}]},{type:a,value:" bitcoin\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:" bitcoin start\n"}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You should be able to now see the daemon starting by running `tail -f \u002Fvar\u002Flog\u002Fbitcoin.log` while logged in as either root, or a user you have added to the bitcoin group with `usermod -aG bitcoin USERNAME`. If the file doesn't exist, you need to debug the systemd service, which will probably involve grepping systemd from \u002Fvar\u002Flog\u002Fsyslog."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"If all has gone well, however, reboot the system and make sure bitcoind is running with `pgrep bitcoind`. If it isn't, time to check syslog for potential systemd failures."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"If anybody has any improvements or questions, please reach out!"}]}]},dir:"\u002Fposts",path:"\u002Fposts\u002Fproduction-bitcoind-service-on-systemd",extension:".md",readingStats:{text:"6 min read",minutes:5.48,time:328800,words:1096},postedAgo:"7 years ago"}}],fetch:{},mutations:void 0}}("text","element","span","token","\n","function"," ","punctuation","operator","variable","p","=","assign-left","sudo","div","nuxt-content-highlight","pre","language-bash","line-numbers","code","a","_blank","number",2,"h2",";","[","]","{","}","builtin","class-name",3,"h3","string","$VERSION","&","amp","chmod","640","chown",null,"2015-03-22T07:00:00.000Z","Preparation","\u002Fetc\u002Fsystemd\u002Fsystem\u002Fbitcoin.service","\u002Fetc\u002Flogrotate.d\u002Fbitcoin","\u002Fetc\u002Fbash.bashrc or \u002Fetc\u002Fbashrc","\u002Fetc\u002Fbitcoin.conf","Software Installation","Set up the base environment","Logging","Bitcoin Daemon Configuration","Done! Start the service!","service","b","!","|","export","-linux","$ARCH",".tar.gz\n","tar","lib,log,run","\u002Fbitcoin\n",")","find","\\","ln")));