__NUXT_JSONP__("/posts/drupal-views-3-contextual-filter", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al){return {data:[{post:{slug:"drupal-views-3-contextual-filter",description:"How to modify a Drupal\u002FViews 3 Contextual Filter to use the LIKE operator, instead of the hard-coded =.",title:"Drupal - Views 3 Contextual Filter LIKE",imagesource:R,imagecredit:R,image:"2012.08.21T14:00:00_drupal-views-3-contextual-filter.png",createdAt:S,updatedAt:S,toc:[],body:{type:"root",children:[{type:b,tag:o,props:{},children:[{type:a,value:"Hi folks,"}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"While working with Drupal 7\u002FViews 3 recently, I found a necessity to use the MySQL \"LIKE\" operator in place of the hard-coded \"=\" in a contextual filter. On researching this, I couldn't find anywhere in Views where this could be set up. To me, it seems insane that this isn't in there already, so if there's any way of doing this in Views UI, please do let me know!"}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"Anyway... What I needed was a contextual filter on the view which would find any node of a certain type which contained a particular string. If the string was static, I could have easily applied it as a filter criterion, however I needed to extract it from the URL. Not finding any simple way of applying a dynamic piece of text to a filter criterion, I decided that the most sensible option would be to try and modify the query. Fortunately, Views 3 provides this as a hook. The "},{type:b,tag:T,props:{href:"http:\u002F\u002Fapi.drupal.org\u002Fapi\u002Fdrupal",target:U},children:[{type:a,value:"Drupal API documentation"}]},{type:a,value:" provides a "},{type:b,tag:T,props:{href:"http:\u002F\u002Fapi.drupal.org\u002Fapi\u002Fviews\u002Fviews.api.php\u002F7",target:U},children:[{type:a,value:"list of all the Views hooks which are provided for your use"}]},{type:a,value:N}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"In Drupal, to implement a hook, you need to write a custom module. I'll go through the whole process here, so no worries if you're not familiar with the process."}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"First, create a folder called \"customviewsquery\" under your Drupal installation, in the folder \"sites\u002Fall\u002Fmodules\". Next, create the following file in the newly created folder."}]},{type:a,value:i},{type:b,tag:V,props:{className:[W]},children:[{type:b,tag:X,props:{className:[Y,"language-ini"]},children:[{type:b,tag:Z,props:{},children:[{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:_}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,G,H]},children:[{type:a,value:"Custom Views Query"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"description"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,G,H]},children:[{type:a,value:"Modifies a single Views 3 contextual filter to use LIKE instead of ="}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"core"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,G,H]},children:[{type:a,value:"7.x"}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"package"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,G,H]},children:[{type:a,value:"Custom Code"}]},{type:a,value:i}]}]}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"Now create the following file:"}]},{type:a,value:i},{type:b,tag:V,props:{className:[W]},children:[{type:b,tag:X,props:{className:[Y,aa]},children:[{type:b,tag:Z,props:{},children:[{type:b,tag:c,props:{className:[d,"php",aa]},children:[{type:b,tag:c,props:{className:[d,"delimiter","important"]},children:[{type:a,value:"\u003C?php"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ab,w]},children:[{type:a,value:"\u002F**\n * Implements hook_views_query_alter\n *\n * Finds the correct view, and calls a relevant callback\n *\u002F"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ac,x]},children:[{type:a,value:"customviewsquery_views_query_alter"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"switch"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"-\u003E"}]},{type:b,tag:c,props:{className:[d,"property"]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"case"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:"'my_view_machine_name'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:":"}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"break"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,ab,w]},children:[{type:a,value:"\u002F**\n * Callback to fix the Views 3 query object before execution\n *\u002F"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ac,x]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\u002F\u002F Loop through the conditional parts of the query, and"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\u002F\u002F * Change = to LIKE"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\u002F\u002F * Add SQL wildcard characters to both sides of the value"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"foreach"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"where "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"as"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:Q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ae}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:"'field'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:af}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n    "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"if"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ae}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:"'node.title'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:af}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:"'='"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:"'LIKE'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:q}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:N}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:N}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l,m]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:"\n\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i}]}]}]}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"You should substitute \"my_view_machine_name\" for Drupal's machine name for the view you want to change, and \"node.title\" to the contextual filter you want to modify (referenced by its table and column reference in Drupal's database)."}]},{type:b,tag:o,props:{},children:[]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"That's about it! Any questions or comments, fire away! I'm particularly interested to see if there is a way to do this in the Views UI."}]},{type:a,value:i},{type:b,tag:o,props:{},children:[{type:a,value:"n00b"}]}]},dir:"\u002Fposts",path:"\u002Fposts\u002Fdrupal-views-3-contextual-filter",extension:".md",readingStats:{text:"3 min read",minutes:2.23,time:133800,words:446},postedAgo:"10 years ago"}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","operator","variable","\n","[","]","string","single-quoted-string",";","p","=","&","keyword","(","$query",")","\n  ","comment","function","{","\n    ","}","'conditions'","number","0","key","attr-name","value","attr-value","$view","\n      ","amp","gt","$val",".",",","-","$key",null,"2012-08-21T14:00:00.000Z","a","_blank","div","nuxt-content-highlight","pre","line-numbers","code","name","\n\n","language-php","doc-comment","function-definition","_customviewsquery_my_view_name_views_query_alter","$field","$operator","'operator'","$value","'value'","==","where","'%'")));