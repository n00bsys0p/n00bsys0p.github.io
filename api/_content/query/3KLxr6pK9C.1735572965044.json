{"_path":"/posts/cups-slackware-headache","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"CUPS + Slackware = Headache.","description":"Battling CUPS in Slackware - and winning!","imagesource":"https://commons.wikimedia.org/wiki/File:Moustache_cup_Tea_museum.jpg","imagecredit":"David Loong","imageFilename":"2009.02.18T150000_cups-slackware-headache.jpg","createdAt":"2009-02-18T15:00:00","updatedAt":"2009-02-18T15:00:00","readingTime":{"text":"1 min read","minutes":0.03,"time":1800,"words":6},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi! Not a very descriptive title I know, but one that describes exactly how I've been feeling for the last couple of days. I've been fighting with CUPS on one of my servers. I've seen a lot of forum posts all over the web wondering why they can't seem to add local printers connected via USB/parallel... I finally understand why. Apparently entering your root password into the CUPS web interface doesn't give you root permissions, it just allows you to access the admin features of the GUI. Here was my misunderstanding... The 3 second fix for this:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"chmod a+rw /dev/usb/lp*\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" a+rw"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/usb/lp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"*\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Wasn't that easy? If you now go to the web interface at "},{"type":"element","tag":"a","props":{"href":"http://localhost:631"},"children":[{"type":"text","value":"http://localhost:631"}]},{"type":"text","value":" (assuming you have activated it), when you add a printer, it'll pick it up straight away. Now just follow the prompts, and if necessary choose a PPD and you're away!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The problem I immediately see is that if the printers become detached from the machine the permissions will revert on plugin. It would be pretty easy to write a UDEV rule which counteracts this... It'd read something like this:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"KERNEL=\"lp*\", RUN+=\"chmod a+rw /dev/usb/lp*\"\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"KERNEL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"lp*\","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" RUN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"+="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"chmod a+rw /dev/usb/lp*\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also, note that this is by no means the best way to do this... chmod-ing a device a+rw in a business environment is a BAD IDEA. A better way to do it would be create a script which chmods the device g+rw then changes the ownership of the device to root:(group of users). Then all you'd have to do is add anybody who you want to have access to the printer to that group."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Anyway... Hope this has been useful for some of you."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:2009-02-18-cups-slackware-headache.md","_source":"content","_file":"posts/2009-02-18-cups-slackware-headache.md","_stem":"posts/2009-02-18-cups-slackware-headache","_extension":"md"}