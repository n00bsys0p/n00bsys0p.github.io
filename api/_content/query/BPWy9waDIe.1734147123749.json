{"_path":"/posts/ubuntu-1110-dell-xps-17-optimus","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Ubuntu 11.10 on Dell XPS 17 & Optimus.","description":"How to install Ubuntu on a Dell XPS 17, and activate hybrid graphics/multi-monitor support.","imagesource":null,"imagecredit":null,"image":"2011.12.12T150000_ubuntu-1110-dell-xps-17-optimus.png","createdAt":"2011-12-12T15:00:00","updatedAt":"2011-12-12T15:00:00","readingTime":{"text":"0 min read","minutes":0,"time":0,"words":0},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I recently upgraded my laptop to a Dell XPS 17. The XPS 17 is Core i7 based, and also designed as a gaming laptop. This means it has two graphics cards installed: The Intel integrated graphics, and a Nvidia GT555M. While drivers were preinstalled, to allow Windows to fully utilise this, Ubuntu proved to be a bit of a pain to install, so here's my guide on how to do so without tearing your hair out."}]},{"type":"element","tag":"h2","props":{"id":"step-1-boot-the-ubuntu-livecd"},"children":[{"type":"text","value":"Step 1: Boot the Ubuntu LiveCD"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This was the first challenge I faced. For some reason, the machine was crashing and hanging very soon after the beginning of the boot process. After a little investigation, I found that this was something to do with the nouveau driver trying to use KMS to set the video mode. In order to initially boot up, it was necessary to temporarily disable kernel modesetting. This can be done via the normal Ubuntu CD boot menu. When the accessibility icon appears at the bottom of the screen, press any key to enter the boot menu. Now press "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"[F6]"}]},{"type":"text","value":" to see a drop down menu of commonly used kernel options (as shown in the image above). Select "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"nomodeset"}]},{"type":"text","value":" and press "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"[F6]"}]},{"type":"text","value":" again to accept. Now press Enter to boot, and you shouldn't see the nouveau driver crash again. You may see nothing but a blank screen during boot, and your resolution once booted is quite likely to be terrible, but at least it's running!"}]},{"type":"element","tag":"h2","props":{"id":"step-2-install-ubuntu"},"children":[{"type":"text","value":"Step 2: Install Ubuntu"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install Ubuntu as you normally would. This is outside the scope of this article, and is pretty simple anyway. Reader Garf found that in order to boot Ubuntu from the HDD this first time, he needed to add "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"nomodeset"}]},{"type":"text","value":" to the kernel command line. To do this, select Ubuntu's main option in Grub, press "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"e"}]},{"type":"text","value":" and add it to the end of the kernel command line."}]},{"type":"element","tag":"h2","props":{"id":"step-3-boot-ubuntu-and-configure"},"children":[{"type":"text","value":"Step 3: Boot Ubuntu, and configure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once Ubuntu is up and running, you need to install Ironhide, which is a fork of Bumblebee, a Linux development to allow Nvidia Optimus support (are you sick of the Transformers references yet?). This can be done by following these steps:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Fix suspend by creating a new file in /etc/pm/config.d. Call it whatever you like, but something related to its function would make sense. Into this file, insert the text "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"SUSPEND_MODULES=\"$SUSPEND_MODULES xhci-hcd\""}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Blacklist the nouveau driver by adding "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"blacklist nouveau"}]},{"type":"text","value":" to /etc/modprobe.d/blacklist.conf"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install mesa utilities and driconf with the command "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sudo apt-get install mesa-utils driconf"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Add the Ironhide repository with "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sudo apt-add-repository ppa:mj-casalogic/ironhide"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install Ironhide: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sudo apt-get update && sudo apt-get install ironhide"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Now reboot, to confirm that all steps so far have worked - it's worth noting that reader Starchild didn't need to use the guide past this point, so if your system works fine after this, and you can use optirun without any issues, then by all means finish the guide after this point."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Add the Xorg Edgers ppa for updated graphics drivers with the command "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sudo apt-add-repository ppa:xorg-edgers/ppa"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update and upgrade with "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sudo apt-get update && sudo apt-get dist-upgrade"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Now reboot, and cross your fingers!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If all went well, your system will come up absolutely fine. In order to use your Nvidia card, prefix the program you want to run with \"optirun \", ie \"optirun glxgears\" to see how glxgears runs with your Nvidia card."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If anybody has any questions, feel free to give me a shout via comments or via my contact form!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"small","props":{},"children":[{"type":"text","value":"Sources:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTrial and error,"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"http://dtbaker.com.au/random-bits/ubuntu-on-dell-xps-17---graphics-and-multi-monitor.html"},"children":[{"type":"text","value":"Ubuntu on Dell XPS 17 - graphics and multi monitor"}]},{"type":"element","tag":"br","props":{},"children":[]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"step-1-boot-the-ubuntu-livecd","depth":2,"text":"Step 1: Boot the Ubuntu LiveCD"},{"id":"step-2-install-ubuntu","depth":2,"text":"Step 2: Install Ubuntu"},{"id":"step-3-boot-ubuntu-and-configure","depth":2,"text":"Step 3: Boot Ubuntu, and configure"}]}},"_type":"markdown","_id":"content:posts:2011-12-12-ubuntu-1110-dell-xps-17-optimus.md","_source":"content","_file":"posts/2011-12-12-ubuntu-1110-dell-xps-17-optimus.md","_stem":"posts/2011-12-12-ubuntu-1110-dell-xps-17-optimus","_extension":"md"}