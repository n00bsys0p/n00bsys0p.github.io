{"_path":"/posts/optimising-slackware-boot-time-part-1","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Optimising Slackware boot time (part 1).","description":"The first part in a series of articles on optimising boot times in Slackware","imagesource":null,"imagecredit":null,"image":"2009.02.21T150000_optimising-slackware-boot-time-part-1.jpg","createdAt":"2009-02-21T15:00:00","updatedAt":"2009-02-21T15:00:00","readingTime":{"text":"0 min read","minutes":0,"time":0,"words":0},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi all! This is easily going to be my most in depth post so far, so buckle up..."}]},{"type":"element","tag":"h1","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you may know, Slackware is widely regarded as one of the most lightning-fast Linux distros. Nevertheless, this isn't enough for some of us pedantic OS hackers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"My aim was to boot the test system with all required services and a media centre system on top in under 1 minute. On previous Slackware installs this had taken up to 2.5 minutes from power-on to operational (Slack 10.1 and ReiserFS on a 160Gb IDE HDD). This is absolutely ridiculous. My aim has been to get it down to well under 1 minute, and this meant getting the initial bootup to around 20 seconds, as the software takes around 20 seconds to initialise, leaving up to 20 seconds for POST on a VIA EPIA EN15000G, which should be easily enough."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While this may sound difficult, it's really not that bad. The Slackware boot process (in a much simplified form) works in the following sequence:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1 - Kernel loaded"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n2 - Initrd/initramfs loaded"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n3 - rc.S executed (runlevel 1)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n4 - rc.M executed (runlevel 2/3)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n5 - X started (runlevel 4)"}]}]},{"type":"element","tag":"h1","props":{"id":"time-to-make-a-plan"},"children":[{"type":"text","value":"Time to make a plan"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I knew that ReiserFS was out of the question for data partitions, as recovery of the journal takes an absurd amount of time. I eventually decided on Ext3 for system partitions and JFS for the media partition. The change from ReiserFS on the system partitions came given the uncertainty of it's future."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I chose Ext3 over Ext4 because I feel that Ext4 is still a little bit too recent to be trusting an entire system with, however give it a year or two and there will be no question. If you're interested in looking up Ext4, there's an in depth review of it "},{"type":"element","tag":"a","props":{"href":"http://www.phoronix.com/scan.php?page=article&item=ext4_benchmarks&num=1"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":". It looks worlds better than even Ext3."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I chose JFS for the data partition as it's very fast and deals with large files really well, making it ideal for digital media. Also it's journal recovery speeds are really fast, allowing me to keep boot time to a minimum."}]},{"type":"element","tag":"h1","props":{"id":"ok-on-with-the-hack"},"children":[{"type":"text","value":"Ok... On with the hack!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Right... Now we've got a plan we can start the implementation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first stage is to install Slackware from the DVD. I'm using 12.2, as it's the latest and greatest, and will STILL more than happily run on a 1.5GHz machine."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you've ever installed Slackware before, you'll know that you've got to do all of your partitioning beforehand. I tend to use CFDisk after booting from the DVD, but if that all looks a bit daunting, a nice easy way to partition is to download the GParted LiveCD, which lets you do it all through a graphical interface."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"My partitions run as follows:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"hda1 - 500Mb - /boot"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda2 - the rest - extended partition to contain others"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda5 - 1Gb - SWAP"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda6 - 500Mb - /home"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda7 - 2Gb - /"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda8 - 5Gb - /usr"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda9 - 1Gb - /var"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nhda10 - Whatever's left - /home/media"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'll post the next section later today. Don't want to put it all into one post, as it'll be hugely too long. Don't want to cause a case of tl;dr."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:2009-02-21-optimising-slackware-boot-time-part-1.md","_source":"content","_file":"posts/2009-02-21-optimising-slackware-boot-time-part-1.md","_stem":"posts/2009-02-21-optimising-slackware-boot-time-part-1","_extension":"md"}