{"_path":"/posts/ignore-directory-structure-tar","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Ignore directory structure with tar.","description":"How to get tar to ignore directory structures","imagesource":"https://commons.wikimedia.org/wiki/File:USA_tar_bubble_la_brea_CA.jpg","imagecredit":"Daniel Schwen","imageFilename":"2010.02.18T150000_ignore-directory-structure-tar.jpg","createdAt":"2010-02-18T15:00:00","updatedAt":"2010-02-18T15:00:00","readingTime":{"text":"1 min read","minutes":0.07,"time":4200,"words":14},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hey all,"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Extremely quick one today, but one I certainly found very useful. In some of my backup tarballs, I've ended up with some seriously deeply nested files, and extracting a single file into a folder, only to have it appear inside an otherwise completely empty 15 folder deep directory tree is pointless, and to be honest, slightly annoying. I found a snippet today which allows you to ignore a specified number of directories when extracting files..."}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"tar --strip-components {N} -xvJf tarball.tar.xz {filename}\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --strip-components"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" {N}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -xvJf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" tarball.tar.xz"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" {filename}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All you need to do is swap {N} for the number of folders to ignore, {filename} for the name of the file you wish to extract, and enter the tarball name instead of \"tarball.tar.xz\". Here's an example..."}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"tar -C ~ --strip components 2 -xvJf Backups.tar.xz shares/public/code/example.php\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" ~"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --strip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" components"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -xvJf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Backups.tar.xz"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" shares/public/code/example.php\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will extract the file \"example.php\" from the tarball \"Backups.tar.xz\", and put it in your home folder in a subdirectory called \"code\". To extract it to a folder called public/code, you would change the number to 1, and to put it directly in your home folder, change it to 3."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Right, off to do some work! Hope this has helped you out!!"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:2010-02-18-ignore-directory-structure-tar.md","_source":"content","_file":"posts/2010-02-18-ignore-directory-structure-tar.md","_stem":"posts/2010-02-18-ignore-directory-structure-tar","_extension":"md"}