{"_path":"/posts/reverse-xorg-scrolling-linux-natural-scrolling","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Reverse Xorg scrolling in Linux (\"Natural Scrolling\")","description":"Configure touch screen style scrolling in Linux","imagesource":null,"imagecredit":null,"image":"2011.07.26T140000_reverse-xorg-scrolling-linux-natural-scrolling.jpg","createdAt":"2011-07-26T14:00:00","updatedAt":"2011-07-26T14:00:00","readingTime":{"text":"1 min read","minutes":0.12,"time":7200,"words":24},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hey guys,"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I found an interesting snippet of information today. In OSX Lion, scrolling is reversed, like we have seen on a lot of touch applications. I for one, find this form of scrolling much more natural than the standard method, particularly when using a laptop touchpad."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is also, really easy to implement on any Linux system. I can't claim credit for this entirely. I have paraphrased the necessary Linux terminal commands from "},{"type":"element","tag":"a","props":{"href":"https://github.com/cemmanouilidis/naturalscrolling","title":"Natural Scrolling","target":"_blank"},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" python app."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The only commands you will need are `xinput`, `grep` and `sed`. The original code used gawk to separate text fields, but I thought I'd use sed, as it gives me a chance to show you some more regex pattern matching, which I have decided will be a running theme through as many of my posts as possible."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first thing to do is to extract the slave input device's xinput id. This is done using `xinput list`, and grep/sed to extract the exact number we want. Here's the command:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"xinput list | egrep \"slave.*pointer\" | grep -v XTEST | sed -e 's/^.*id=//' -e 's/\\s.*$//'\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"xinput"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" list"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" egrep"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"slave.*pointer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" grep"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -v"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" XTEST"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" sed"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 's/^.*id=//'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 's/\\s.*$//'\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This extracts the id number by first matching the regex \"slave.*pointer\", which means match the letters \"slave\", then anything, then the letters \"pointer\". It then makes sure that our output ignores any line which contains the characters \"XTEST\". Now it has the line it wants, it needs to extract the correct field. As I mentioned, I've used sed instead of awk (which is possibly slightly more readable - I never said my option was the better one). I use sed -e, so I can search and replace multiple regex in the order I specify. The first sed expression is to match anything from the start of the line (^.*), until it reaches the end of the characters \"id=\", and replace them with nothing (//). The second sed expression starts matching at the first whitespace found (\\s), and continues on until the end of the line ($). It is not necessary to include the $, as sed will default to matching until the end of the line anyway. I have included it only for the purposes of explanation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now we have our id number (in my case \"11\"), we can find out what the current input order is. For this, we use the following command, replacing {idnum} with the number we extracted before:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"xinput get-button-map {idnum}\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"xinput"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" get-button-map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" {idnum}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will most likely output a sequence of numbers, in order. If the numbers are in order, this means that the scrolling is not reversed. What we need to do to reverse the scrolling, is reverse numbers 4 and 5, which represent the scroll wheel. We do this by using a very similar command to the one we just used. In this, replace {order} with the same sequence you saw in the output of `xinput get-button-map`, with 4 and 5's order reversed, and {idnum} with our extracted input id again:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"xinput set-button-map {idnum} {order}\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"xinput"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" set-button-map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" {idnum}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" {order}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"style":"color: red;","id":"update-111011"},"children":[{"type":"text","value":"Update: 11/10/11"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reader "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beeman"}]},{"type":"text","value":" pointed out another way to do this without using the {idnum} would be to use "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"xmodmap"}]},{"type":"text","value":" as follows (just replace {order} with the intended order of the buttons):"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"xmodmap -e \"pointer = {order}\"\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"xmodmap"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"pointer = {order}\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it done! Go to any application with a scroll-wheel activated scroll function, and watch it in action! To switch back, just repeat the last command with 4 and 5 back in the correct order!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To simplify this whole process, check out the Python code at the link I mentioned previously. You may or may not be able to use it as it is, because it uses PyGTK, and therefore KDE users will have to port it to PyKDE in order to use it. It's pretty simple as long as you have any programming experience. Even if not, I encourage you to have a look - Python's an amazing language!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Anything you want to know in more detail, or any corrections/improvements you would like to suggest, please direct it to the comments section, and I'll do my best to get back to you as soon as I can!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"update-111011","depth":2,"text":"Update: 11/10/11"}]}},"_type":"markdown","_id":"content:posts:2011-07-26-reverse-xorg-scrolling-linux-natural-scrolling.md","_source":"content","_file":"posts/2011-07-26-reverse-xorg-scrolling-linux-natural-scrolling.md","_stem":"posts/2011-07-26-reverse-xorg-scrolling-linux-natural-scrolling","_extension":"md"}