{"_path":"/posts/arduinomsgeq7-audio-spectrum-led-display","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Arduino/MSGEQ7 Audio Spectrum LED Display","description":"Arduino/MSGEQ7 Seven Band Graphic Equalizer Display Filter Tutorial","imagesource":null,"imagecredit":null,"imageFilename":"2012.01.13T150000_arduinomsgeq7-audio-spectrum-led-display.png","createdAt":"2012-01-13T15:00:00","updatedAt":"2012-01-13T15:00:00","readingTime":{"text":"2 min read","minutes":1.385,"time":83100,"words":277},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi guys!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Another Arduino-related post today. I've created a basic audio spectrum analysis circuit based around the "},{"type":"element","tag":"a","props":{"href":"http://www.mix-sig.com/index.php?option=com_content&view=article&id=145%3Amsgeq7-&catid=52&Itemid=55","target":"_blank"},"children":[{"type":"text","value":"MSI MSGEQ7"}]},{"type":"text","value":", which is a 7-band Graphic Equaliser Display Filter. It basically takes an audio input, and spits out 7 logarithmic scale frequency amplitude values between 63Hz and 16KHz. While this can be done to a far more accurate scale by running a "},{"type":"element","tag":"a","props":{"href":"http://en.wikipedia.org/wiki/Fast_Fourier_transform","target":"_blank"},"children":[{"type":"text","value":"Fast Fourier Transform"}]},{"type":"text","value":" on an audio signal, the Arduino isn't greatly suited to this task. It's possible to do this on a computer, and transmit the constrained values to the Arduino, but why use all those processor cycles, when there's such a useful little IC which does it for you "},{"type":"element","tag":"a","props":{"href":"http://proto-pic.co.uk/graphic-equalizer-display-filter-msgeq7-1/?gclid=CJ-y8uCJzq0CFbIhtAodshAikw","target":"_blank"},"children":[{"type":"text","value":"for only a few quid"}]},{"type":"text","value":"?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Connecting the MSGEQ7 to the Arduino is a fairly simple task, even for an electronics newbie like myself. I followed "},{"type":"element","tag":"a","props":{"href":"http://nuewire.com/info-archive/msgeq7-by-j-skoba/","target":"_blank"},"children":[{"type":"text","value":"J. Skoba's guide"}]},{"type":"text","value":" for the most part, but substituted some of the parts for components I had lying around, and it worked just fine. The project requires:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 x 0.1uF ceramic capacitors"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 x 220K Ohm resistor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 x 250 Ohm resistor (current limiters for RGB LEDs)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 x TRS audio jacks"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 x TRS audio plug"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 x 3.5mm TRS to 3.5mm TRS audio cable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A connector to attach a 3.5mm jack to an audio amplifier or powered speakers (I used a 3.5mm TRS to 2 x RCA lead)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 x common cathode RGB LEDs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A whole mess of jumper wires"}]}]},{"type":"element","tag":"p","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"/sites/default/files/MSGEQ7_bb.png","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"/sites/default/files/MSGEQ7_bb.png","height":480,"width":640},"children":[]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"s","props":{},"children":[{"type":"text","value":"Here's the schematic to see how to hook everything up. Sorry about the crappy resolution. If anybody wants a higher res version, just let me know, and I'll see what I can do."}]},{"type":"text","value":" Here's a breadboard diagram made in "},{"type":"element","tag":"a","props":{"href":"http://fritzing.org/"},"children":[{"type":"text","value":"Fritzing"}]},{"type":"text","value":". Way better quality that the other pic I had, and the pins are right too, which helps :-P. If you want an SVG version, I've saved one in the same folder. Just change the filename in your address bar. I didn't include it in the article as it appears to have missed R1 for some reason."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's a couple of pictures of my breadboard to help you out if you're still having problems."}]},{"type":"element","tag":"p","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"/sites/default/files/MSGEQ7-1.jpg","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"/sites/default/files/MSGEQ7-1.jpg","height":240,"width":320},"children":[]}]},{"type":"text","value":"     "},{"type":"element","tag":"a","props":{"href":"/sites/default/files/MSGEQ7-2.jpg","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"/sites/default/files/MSGEQ7-2.jpg","height":240,"width":320},"children":[]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The code I used is a mixture of my own, and that of a few sources on the Internet; the most notable of these is "},{"type":"element","tag":"a","props":{"href":"http://nuewire.com/info-archive/msgeq7-by-j-skoba/","target":"_blank"},"children":[{"type":"text","value":"J. Skoba's Arduino/MSGEQ7 tutorial"}]},{"type":"text","value":". Here's the code for your perusal and use:"}]},{"type":"element","tag":"pre","props":{"className":"language-java shiki shiki-themes github-dark","code":"/**\n * Author: n00bsys0p (n00bATNOSPAMn00bsys0p.co.uk)\n * Date: 13/01/12\n * Arduino: Uno v3\n *\n * Arduino code for use with my MSGEQ7 schematics.\n * Find the schematics to go with this on my blog at:\n * http://n00bsys0p.co.uk\n *\n * Most of this is sourced from J. Skoba's guide at:\n * http://nuewire.com/info-archive/msgeq7-by-j-skoba/\n *\n * Other parts sourced from various other places\n * online. If you recognise your code, THANK YOU!\n *\n * Massive thanks to the Arduino community for being\n * so open and so giving!\n *\n * I found his personal site at no-ip.org to be offline\n * a lot, so use this link if you have trouble.\n */\n\nint analogPin = 0; // MSGEQ7 OUT\nint strobePin = 2; // MSGEQ7 STROBE\nint resetPin = 4; // MSGEQ7 RESET\nint spectrumValue[7];\n\n// MSGEQ7 OUT pin produces values around 50-80\n// when there is no input, so use this value to\n// filter out a lot of the chaff.\nint filterValue = 80;\n\n// LED pins. I used 2 common cathode RGB LEDs.\n// They're connected to the PWM pins on the Arduino\nint ledPinR1 = 3;\nint ledPinG1 = 5;\nint ledPinB1 = 6;\n\nint ledPinR2 = 9;\nint ledPinG2 = 10;\nint ledPinB2 = 11;\n\nvoid setup()\n{\n  Serial.begin(9600);\n  // Read from MSGEQ7 OUT\n  pinMode(analogPin, INPUT);\n  // Write to MSGEQ7 STROBE and RESET\n  pinMode(strobePin, OUTPUT);\n  pinMode(resetPin, OUTPUT);\n\n  // Set analogPin's reference voltage\n  analogReference(DEFAULT); // 5V\n\n  // Set startup values for pins\n  digitalWrite(resetPin, LOW);\n  digitalWrite(strobePin, HIGH);\n}\n\nvoid loop()\n{\n  // Set reset pin low to enable strobe\n  digitalWrite(resetPin, HIGH);\n  digitalWrite(resetPin, LOW);\n\n  // Get all 7 spectrum values from the MSGEQ7\n  for (int i = 0; i\n","language":"java","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"/**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Author: n00bsys0p (n00bATNOSPAMn00bsys0p.co.uk)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Date: 13/01/12\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Arduino: Uno v3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" *\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Arduino code for use with my MSGEQ7 schematics.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Find the schematics to go with this on my blog at:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * http://n00bsys0p.co.uk\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" *\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Most of this is sourced from J. Skoba's guide at:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * http://nuewire.com/info-archive/msgeq7-by-j-skoba/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" *\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Other parts sourced from various other places\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * online. If you recognise your code, THANK YOU!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" *\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * Massive thanks to the Arduino community for being\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * so open and so giving!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" *\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * I found his personal site at no-ip.org to be offline\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" * a lot, so use this link if you have trouble.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" analogPin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// MSGEQ7 OUT\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" strobePin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// MSGEQ7 STROBE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" resetPin "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// MSGEQ7 RESET\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" spectrumValue["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// MSGEQ7 OUT pin produces values around 50-80\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// when there is no input, so use this value to\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// filter out a lot of the chaff.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" filterValue "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 80"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// LED pins. I used 2 common cathode RGB LEDs.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// They're connected to the PWM pins on the Arduino\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinR1 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinG1 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinB1 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinR2 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 9"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinG2 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ledPinB2 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  Serial."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"9600"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Read from MSGEQ7 OUT\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  pinMode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(analogPin, INPUT);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Write to MSGEQ7 STROBE and RESET\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  pinMode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(strobePin, OUTPUT);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  pinMode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(resetPin, OUTPUT);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Set analogPin's reference voltage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  analogReference"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(DEFAULT); "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// 5V\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Set startup values for pins\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  digitalWrite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(resetPin, LOW);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  digitalWrite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(strobePin, HIGH);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" loop"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Set reset pin low to enable strobe\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  digitalWrite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(resetPin, HIGH);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"  digitalWrite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"(resetPin, LOW);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Get all 7 spectrum values from the MSGEQ7\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"  for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; i\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I split the audio from my laptop to an amplifier and the circuit by making a simple splitter with 3 TRS audio jacks, connecting the single end to my laptop, one of the double end to the circuit, and the other to my amplifier. I also used a TRS plug instead of a TRS socket on the circuit, as the schematic shows. I'll add some pictures shortly to show you how my breadboard is set up."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I don't think that there's much else to do, than include a video of the final build. Sorry about the terrible editing in the video, and the hurried nature of this post. I'll do my best to improve it at a later date."}]},{"type":"element","tag":"div","props":{"className":["text-center"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"iframe","props":{"width":560,"height":315,"src":"http://www.youtube.com/embed/BP5ZQEuXEAU","frameBorder":"0","allowFullScreen":true},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As always, direct any questions to the contact form or comments!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:2012-01-13-arduinomsgeq7-audio-spectrum-led-display.md","_source":"content","_file":"posts/2012-01-13-arduinomsgeq7-audio-spectrum-led-display.md","_stem":"posts/2012-01-13-arduinomsgeq7-audio-spectrum-led-display","_extension":"md"}