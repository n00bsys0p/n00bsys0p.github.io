{"_path":"/posts/modifying-ssh-ban-list","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"Modifying the SSH ban list.","description":"How to manually edit the IPTables SSH ban list","imagesource":"https://commons.wikimedia.org/wiki/File:Digicode.JPG","imagecredit":"D4m1en","imageFilename":"2009.04.06T140000_modifying-ssh-ban-list.jpg","createdAt":"2009-04-06T14:00:00","updatedAt":"2009-04-06T14:00:00","readingTime":{"text":"1 min read","minutes":0.055,"time":3300,"words":11},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi everybody!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How many times have you locked yourself out of your remote server by being too quick for your own good? My servers are all set to ban an IP after 3 connection attempts within a minute, so it happens quite regularly that I lock myself out."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The list of banned IPs is stored in "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"/proc/net/ipt_recent"}]},{"type":"text","value":". There are a couple of commands this 'file' understands..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To see what IPs are currently banned, use:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"cat /proc/net/ipt_recent/BAN_LIST_NAME).\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /proc/net/ipt_recent/BAN_LIST_NAME"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":").\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To remove an IP from the list use:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"echo \"-xxx.xxx.xxx.xxx\" &gt; /proc/net/ipt_recent/BAN_LIST_NAME\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"-xxx.xxx.xxx.xxx\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" &"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"gt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/proc/net/ipt_recent/BAN_LIST_NAME\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To add a suspicious or known bad IP:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"echo \"+xxx.xxx.xxx.xxx\" &gt;; /proc/net/ipt_recent/BAN_LIST_NAME\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"+xxx.xxx.xxx.xxx\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" &"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"gt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/proc/net/ipt_recent/BAN_LIST_NAME\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To remove all entries (not really a very good idea):"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"echo \"clear\" &gt; /proc/net/ipt_recent/BAN_LIST_NAME\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"clear\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" &"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"gt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/proc/net/ipt_recent/BAN_LIST_NAME\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's all for now."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"n00b"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:posts:2009-04-06-modifying-ssh-ban-list.md","_source":"content","_file":"posts/2009-04-06-modifying-ssh-ban-list.md","_stem":"posts/2009-04-06-modifying-ssh-ban-list","_extension":"md"}